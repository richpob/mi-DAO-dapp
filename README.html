<!DOCTYPE html>
<html>
<head>
<title>README.md</title>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">

<style>
/* https://github.com/microsoft/vscode/blob/master/extensions/markdown-language-features/media/markdown.css */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

body {
	font-family: var(--vscode-markdown-font-family, -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif);
	font-size: var(--vscode-markdown-font-size, 14px);
	padding: 0 26px;
	line-height: var(--vscode-markdown-line-height, 22px);
	word-wrap: break-word;
}

#code-csp-warning {
	position: fixed;
	top: 0;
	right: 0;
	color: white;
	margin: 16px;
	text-align: center;
	font-size: 12px;
	font-family: sans-serif;
	background-color:#444444;
	cursor: pointer;
	padding: 6px;
	box-shadow: 1px 1px 1px rgba(0,0,0,.25);
}

#code-csp-warning:hover {
	text-decoration: none;
	background-color:#007acc;
	box-shadow: 2px 2px 2px rgba(0,0,0,.25);
}

body.scrollBeyondLastLine {
	margin-bottom: calc(100vh - 22px);
}

body.showEditorSelection .code-line {
	position: relative;
}

body.showEditorSelection .code-active-line:before,
body.showEditorSelection .code-line:hover:before {
	content: "";
	display: block;
	position: absolute;
	top: 0;
	left: -12px;
	height: 100%;
}

body.showEditorSelection li.code-active-line:before,
body.showEditorSelection li.code-line:hover:before {
	left: -30px;
}

.vscode-light.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(0, 0, 0, 0.15);
}

.vscode-light.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(0, 0, 0, 0.40);
}

.vscode-light.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-dark.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 255, 255, 0.4);
}

.vscode-dark.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 255, 255, 0.60);
}

.vscode-dark.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-high-contrast.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 160, 0, 0.7);
}

.vscode-high-contrast.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 160, 0, 1);
}

.vscode-high-contrast.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

img {
	max-width: 100%;
	max-height: 100%;
}

a {
	text-decoration: none;
}

a:hover {
	text-decoration: underline;
}

a:focus,
input:focus,
select:focus,
textarea:focus {
	outline: 1px solid -webkit-focus-ring-color;
	outline-offset: -1px;
}

hr {
	border: 0;
	height: 2px;
	border-bottom: 2px solid;
}

h1 {
	padding-bottom: 0.3em;
	line-height: 1.2;
	border-bottom-width: 1px;
	border-bottom-style: solid;
}

h1, h2, h3 {
	font-weight: normal;
}

table {
	border-collapse: collapse;
}

table > thead > tr > th {
	text-align: left;
	border-bottom: 1px solid;
}

table > thead > tr > th,
table > thead > tr > td,
table > tbody > tr > th,
table > tbody > tr > td {
	padding: 5px 10px;
}

table > tbody > tr + tr > td {
	border-top: 1px solid;
}

blockquote {
	margin: 0 7px 0 5px;
	padding: 0 16px 0 10px;
	border-left-width: 5px;
	border-left-style: solid;
}

code {
	font-family: Menlo, Monaco, Consolas, "Droid Sans Mono", "Courier New", monospace, "Droid Sans Fallback";
	font-size: 1em;
	line-height: 1.357em;
}

body.wordWrap pre {
	white-space: pre-wrap;
}

pre:not(.hljs),
pre.hljs code > div {
	padding: 16px;
	border-radius: 3px;
	overflow: auto;
}

pre code {
	color: var(--vscode-editor-foreground);
	tab-size: 4;
}

/** Theming */

.vscode-light pre {
	background-color: rgba(220, 220, 220, 0.4);
}

.vscode-dark pre {
	background-color: rgba(10, 10, 10, 0.4);
}

.vscode-high-contrast pre {
	background-color: rgb(0, 0, 0);
}

.vscode-high-contrast h1 {
	border-color: rgb(0, 0, 0);
}

.vscode-light table > thead > tr > th {
	border-color: rgba(0, 0, 0, 0.69);
}

.vscode-dark table > thead > tr > th {
	border-color: rgba(255, 255, 255, 0.69);
}

.vscode-light h1,
.vscode-light hr,
.vscode-light table > tbody > tr + tr > td {
	border-color: rgba(0, 0, 0, 0.18);
}

.vscode-dark h1,
.vscode-dark hr,
.vscode-dark table > tbody > tr + tr > td {
	border-color: rgba(255, 255, 255, 0.18);
}

</style>

<style>
/* Tomorrow Theme */
/* http://jmblog.github.com/color-themes-for-google-code-highlightjs */
/* Original theme - https://github.com/chriskempson/tomorrow-theme */

/* Tomorrow Comment */
.hljs-comment,
.hljs-quote {
	color: #8e908c;
}

/* Tomorrow Red */
.hljs-variable,
.hljs-template-variable,
.hljs-tag,
.hljs-name,
.hljs-selector-id,
.hljs-selector-class,
.hljs-regexp,
.hljs-deletion {
	color: #c82829;
}

/* Tomorrow Orange */
.hljs-number,
.hljs-built_in,
.hljs-builtin-name,
.hljs-literal,
.hljs-type,
.hljs-params,
.hljs-meta,
.hljs-link {
	color: #f5871f;
}

/* Tomorrow Yellow */
.hljs-attribute {
	color: #eab700;
}

/* Tomorrow Green */
.hljs-string,
.hljs-symbol,
.hljs-bullet,
.hljs-addition {
	color: #718c00;
}

/* Tomorrow Blue */
.hljs-title,
.hljs-section {
	color: #4271ae;
}

/* Tomorrow Purple */
.hljs-keyword,
.hljs-selector-tag {
	color: #8959a8;
}

.hljs {
	display: block;
	overflow-x: auto;
	color: #4d4d4c;
	padding: 0.5em;
}

.hljs-emphasis {
	font-style: italic;
}

.hljs-strong {
	font-weight: bold;
}
</style>

<style>
/*
 * Markdown PDF CSS
 */

 body {
	font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif, "Meiryo";
	padding: 0 12px;
}

pre {
	background-color: #f8f8f8;
	border: 1px solid #cccccc;
	border-radius: 3px;
	overflow-x: auto;
	white-space: pre-wrap;
	overflow-wrap: break-word;
}

pre:not(.hljs) {
	padding: 23px;
	line-height: 19px;
}

blockquote {
	background: rgba(127, 127, 127, 0.1);
	border-color: rgba(0, 122, 204, 0.5);
}

.emoji {
	height: 1.4em;
}

code {
	font-size: 14px;
	line-height: 19px;
}

/* for inline code */
:not(pre):not(.hljs) > code {
	color: #C9AE75; /* Change the old color so it seems less like an error */
	font-size: inherit;
}

/* Page Break : use <div class="page"/> to insert page break
-------------------------------------------------------- */
.page {
	page-break-after: always;
}

</style>

<script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
</head>
<body>
  <script>
    mermaid.initialize({
      startOnLoad: true,
      theme: document.body.classList.contains('vscode-dark') || document.body.classList.contains('vscode-high-contrast')
          ? 'dark'
          : 'default'
    });
  </script>
<h1 id="sistema-de-votaci%C3%B3n-para-una-comunidad-sprint-3">Sistema de Votación para una Comunidad Sprint 3</h1>
<h2 id="descripci%C3%B3n">Descripción</h2>
<p>Este proyecto es un sistema de votación descentralizado para una comunidad, implementado utilizando un smart contract en Ethereum y una interfaz de usuario desarrollada en React. Permite a los miembros registrados votar en propuestas y ver los resultados de las votaciones de manera transparente y segura.</p>
<h2 id="tecnolog%C3%ADas-utilizadas">Tecnologías Utilizadas</h2>
<ul>
<li><strong>Solidity</strong>: Lenguaje de programación para escribir smart contracts.</li>
<li><strong>Ethereum Testnet (Sepolia)</strong>: Red de prueba donde se despliega el contrato.</li>
<li><strong>MetaMask</strong>: Wallet de Ethereum para interactuar con el blockchain.</li>
<li><strong>Remix</strong>: IDE de Ethereum usado para desarrollar y desplegar el smart contract.</li>
<li><strong>Visual Studio Code</strong>: Editor de código utilizado para el desarrollo del frontend.</li>
<li><strong>React</strong>: Biblioteca de JavaScript para construir la interfaz de usuario.</li>
<li><strong>Web3.js</strong>: Biblioteca para interactuar con nodos Ethereum desde el navegador.</li>
<li><strong>Material-UI</strong>: Biblioteca de componentes React para un diseño de interfaz moderno y responsive.</li>
</ul>
<h2 id="instalaci%C3%B3n-de-ambiente-de-desarrollo-en-ubuntu-2204">Instalación de ambiente de desarrollo en Ubuntu 22.04</h2>
<p>los pasos para configurar un entorno de desarrollo completo para el desarrollo de aplicaciones descentralizadas (DApps) sobre la blockchain en Ubuntu. La infraestructura creada se puede desglosar en varias partes:</p>
<ol>
<li>Herramientas de desarrollo y versionado: Instalación de Git y GitHub Desktop para manejo de versiones y colaboración en proyectos de código.</li>
<li>Editores de código: Instalación de Visual Studio Code (VS Code), un editor de texto optimizado para el desarrollo de software.</li>
<li>Entorno de ejecución de JavaScript y gestión de paquetes: Instalación de Node.js (versión LTS) y npm, herramientas esenciales para la ejecución de scripts JavaScript fuera del navegador y la gestión de bibliotecas de JavaScript.</li>
<li>Herramientas de desarrollo de contratos inteligentes: Instalación de Truffle y Ganache, que son herramientas para la compilación, migración y prueba de contratos inteligentes en entornos de desarrollo local.</li>
<li>Bibliotecas y frameworks para el desarrollo DApp: Instalación de OpenZeppelin (para contratos inteligentes seguros), Material-UI y MUI (para interfaces de usuario en React), y otras librerías necesarias para el diseño y funcionalidad de DApps.</li>
<li>Creación de una aplicación React: Utilización de Create React App para establecer la base de una aplicación web que interactuará con la blockchain.</li>
<li>Entorno y herramientas para la verificación y despliegue de contratos: Configuración de plugins y herramientas para la verificación de contratos en redes blockchain públicas, gestión de wallets y variables de entorno.</li>
<li>Hosting descentralizado: Preparativos para el despliegue de la aplicación en un entorno descentralizado, implicando la construcción de la aplicación para producción.</li>
</ol>
<p>Esta infraestructura permite el desarrollo, prueba, y despliegue de aplicaciones descentralizadas, integrando herramientas modernas de desarrollo web con tecnologías específicas de blockchain.</p>
<h2 id="principales-versiones-de-software">Principales versiones de software</h2>
<ul>
<li><strong>Folder de proyecto: ubuntu@ubuntu:~/Documents/GitHub/DAOCommunity$</strong></li>
<li><strong>truffle --version</strong></li>
<li><strong>Truffle v5.11.5 (core: 5.11.5)</strong></li>
<li><strong>Ganache v7.9.1</strong></li>
<li><strong>Solidity - 0.8.20 (solc-js)</strong></li>
<li><strong>Node v20.12.2</strong></li>
<li><strong>Web3.js v1.10.0</strong></li>
</ul>
<h2 id="instrucciones-para-recrear-el-ambiente">Instrucciones para recrear el ambiente</h2>
<pre class="hljs"><code><div><span class="hljs-comment"># Install Github Desktop &amp; Git</span>
sudo apt-get update
sudo apt-get install git

wget -qO - https://apt.packages.shiftkey.dev/gpg.key | gpg --dearmor | sudo tee /usr/share/keyrings/shiftkey-packages.gpg &gt; /dev/null
sudo sh -c <span class="hljs-string">'echo "deb [arch=amd64 signed-by=/usr/share/keyrings/shiftkey-packages.gpg] https://apt.packages.shiftkey.dev/ubuntu/ any main" &gt; /etc/apt/sources.list.d/shiftkey-packages.list'</span>
sudo apt update &amp;&amp; sudo apt install github-desktop
<span class="hljs-comment"># Install VS Code</span>
sudo apt-get install wget gpg
wget -qO- https://packages.microsoft.com/keys/microsoft.asc | gpg --dearmor &gt; packages.microsoft.gpg
sudo install -D -o root -g root -m 644 packages.microsoft.gpg /etc/apt/keyrings/packages.microsoft.gpg
sudo sh -c <span class="hljs-string">'echo "deb [arch=amd64,arm64,armhf signed-by=/etc/apt/keyrings/packages.microsoft.gpg] https://packages.microsoft.com/repos/code stable main" &gt; /etc/apt/sources.list.d/vscode.list'</span>
rm -f packages.microsoft.gpg
sudo apt install apt-transport-https
sudo apt update
sudo apt install code
<span class="hljs-comment"># Install nodejs LTS</span>
sudo apt-get update
sudo apt-get upgrade
sudo apt-get install curl
sudo apt-get update
curl -fsSL https://deb.nodesource.com/setup_lts.x | sudo -E bash -
sudo apt-get install nodejs
node -v
npm -v
<span class="hljs-comment">#Install truffle</span>
sudo npm install -g truffle
sudo npm install -g truffle dashboard
truffle --version

<span class="hljs-comment">#Install Ganche</span>
wget https://github.com/trufflesuite/ganache-ui/releases/download/v2.7.1/ganache-2.7.1-linux-x86_64.AppImage 
sudo add-apt-repository universe
sudo apt install libfuse2

<span class="hljs-comment"># Install library : OpenZeppelin; MAterial UI: otras</span>
npm install @openzeppelin/contracts
npm install @material-ui/core
npm install @mui/material @emotion/react @emotion/styled //import MoreVertIcon from <span class="hljs-string">'@mui/icons-material/MoreVert'</span>
npm install @mui/icons-material

npm install react-error-boundary
npm install web3


<span class="hljs-comment"># Install react en proyecto</span>
npx create-react-app mi-dao-dapp

<span class="hljs-comment">#Install pluggins verufy</span>
npm install @truffle/dashboard
npm install -D truffle-plugin-verify
npm install @truffle/hdwallet-provider
truffle run verify &lt;ContractName&gt; --network &lt;NetworkName&gt;

<span class="hljs-comment">#Creación de fichero de variables de entorno</span>
touch .env
npm install dotenv

<span class="hljs-comment"># Hosting Descentralizado </span>
npm run build


</div></code></pre>
<h2 id="smart-contract">Smart Contract</h2>
<p>Smart Contract desde Truffle dashboard a Sepolia TestNet</p>
<ul>
<li><strong>El contrato está desplegado en la dirección:</strong><a href="https://sepolia.etherscan.io/address/0x5b244ddac206f403430faf50e950b8cfabc8ec3b">https://sepolia.etherscan.io/address/0x5b244ddac206f403430faf50e950b8cfabc8ec3b</a></li>
</ul>
<h3 id="funcionalidades-del-contrato">Funcionalidades del Contrato</h3>
<ul>
<li><strong>Registro de miembros</strong>: Los miembros pueden registrarse almacenando una cantidad de tokens que les permitirá votar.</li>
<li><strong>Creación de propuestas</strong>: Los administradores pueden crear propuestas sobre las cuales los miembros podrán votar.</li>
<li><strong>Votación</strong>: Los miembros utilizan sus tokens para votar en propuestas activas.</li>
<li><strong>Ejecución de propuestas</strong>: Las propuestas que alcanzan los votos necesarios pueden ser ejecutadas por los administradores.</li>
</ul>
<h3 id="m%C3%A9todos-principales-y-componentes-de-despliegue-y-validaci%C3%B3n">Métodos Principales y componentes de despliegue y validación</h3>
<pre class="hljs"><code><div>// SPDX-License-Identifier: MIT
pragma solidity ^0.8.20;

import &quot;@openzeppelin/contracts/access/Ownable.sol&quot;;
import &quot;@openzeppelin/contracts/token/ERC20/ERC20.sol&quot;;

 // Contrato de la Comunidad
contract Community is Ownable(msg.sender) {
    string public communityName;
    string public communityAddress;
    string public presidentName;
    string public adminName;
    uint256 public creationDate;

    mapping(address =&gt; uint256) public memberTokens;  // Tokens de votación asignados a cada miembro
    Proposal[] public proposals; // Lista de propuestas
    mapping(uint256 =&gt; mapping(address =&gt; bool)) public hasVoted; // Mapping to track if a member has voted on a proposal

    struct Proposal {
        string description;
        uint256 voteCount;
        bool executed;
    }

    event ProposalCreated(uint256 proposalId, string description);
    event VoteReceived(uint256 proposalId, address voter, uint256 votes);
    event ProposalExecuted(uint256 proposalId);

    constructor(
        string memory _name,
        string memory _address,
        string memory _president,
        string memory _admin,
        uint256 _creationDate
    ) {
        communityName = _name;
        communityAddress = _address;
        presidentName = _president;
        adminName = _admin;
        creationDate = _creationDate;
    }

    function registerMember(address member, uint256 tokens) public onlyOwner {
        memberTokens[member] = tokens;
    }

    function createProposal(string memory description) public onlyOwner {
        proposals.push(Proposal({
            description: description,
            voteCount: 0,
            executed: false
        }));

        uint256 newProposalId = proposals.length - 1;
        emit ProposalCreated(newProposalId, description);
    }

    function voteOnProposal(uint256 proposalId, uint256 votes) public {
        require(memberTokens[msg.sender] &gt;= votes, &quot;Not enough tokens to vote&quot;);
        require(!hasVoted[proposalId][msg.sender], &quot;Already voted&quot;);

        proposals[proposalId].voteCount += votes;
        hasVoted[proposalId][msg.sender] = true;
        memberTokens[msg.sender] -= votes;

        emit VoteReceived(proposalId, msg.sender, votes);
    }

    function executeProposal(uint256 proposalId) public onlyOwner {
        require(!proposals[proposalId].executed, &quot;Proposal already executed&quot;);
        proposals[proposalId].executed = true;
        // Logic to execute the proposal goes here

        emit ProposalExecuted(proposalId);
    }
}
</div></code></pre>
<h3 id="ganache-dashboard">Ganache Dashboard</h3>
<p><img src="https://github.com/richpob/mi-dao-dapp/assets/133718913/f91cd3c1-a526-4e8f-8cf0-db4b433dc2e4" alt="image"></p>
<p><img src="https://github.com/richpob/mi-dao-dapp/assets/133718913/ef3f0cf9-9462-492c-9d10-4f80f3c8e7bc" alt="image"></p>
<h3 id="despliegue-desde-vs-code-a-sepolia-testnet">Despliegue desde VS Code a Sepolia TestNet</h3>
<p><img src="https://github.com/richpob/mi-dao-dapp/assets/133718913/2b2ca7f7-449c-449a-b7bd-d532a482491f" alt="image"></p>
<h2 id="contrato-de-la-comunidad">Contrato de la Comunidad</h2>
<h3 id="descripci%C3%B3n-general">Descripción General</h3>
<p>Este contrato inteligente, desarrollado con Solidity, permite la gestión de una comunidad mediante la asignación de tokens de votación a sus miembros y la creación y votación de propuestas. Está diseñado para ser administrado por el propietario del contrato, quien tiene derechos exclusivos para ciertas operaciones.</p>
<h3 id="caracter%C3%ADsticas-del-contrato">Características del Contrato</h3>
<ul>
<li><strong>Gestión de Miembros y Propuestas</strong>: Solo el propietario puede añadir miembros y crear propuestas.</li>
<li><strong>Votación</strong>: Los miembros pueden votar en propuestas activas utilizando tokens asignados.</li>
</ul>
<h3 id="detalles-del-contrato">Detalles del Contrato</h3>
<h4 id="importaciones">Importaciones</h4>
<ul>
<li><strong>OpenZeppelin Contracts</strong>: Utiliza <code>Ownable</code> para funciones de propiedad y <code>ERC20</code> para manejar tokens.<pre class="hljs"><code><div>import &quot;@openzeppelin/contracts/access/Ownable.sol&quot;;
import &quot;@openzeppelin/contracts/token/ERC20/ERC20.sol&quot;;
</div></code></pre>
</li>
</ul>
<h4 id="variables-de-estado">Variables de Estado</h4>
<p><strong>communityName</strong>, <strong>communityAddress, presidentName, adminName, creationDate: Almacenan información básica sobre la comunidad.
memberTokens</strong>: Un mapping que relaciona cada dirección de miembro con sus tokens de votación.
<strong>proposals</strong>: Un array que almacena todas las propuestas creadas.
<strong>hasVoted</strong>: Un mapping doble para rastrear si un miembro ha votado en una propuesta.</p>
<h4 id="structs">Structs</h4>
<p><strong>Proposal</strong>: Define una propuesta con descripción, conteo de votos y estado de ejecución.</p>
<pre class="hljs"><code><div>struct Proposal {
    string description;
    uint256 voteCount;
    bool executed;
}
</div></code></pre>
<h4 id="eventos">Eventos</h4>
<p><strong>ProposalCreated</strong>: Se emite cuando se crea una nueva propuesta.
<strong>VoteReceived</strong>: Se emite cuando un voto es registrado.
<strong>ProposalExecuted</strong>: Se emite cuando una propuesta es ejecutada.
****Constructor
Inicializa el contrato con datos básicos de la comunidad y establece el propietario.</p>
<pre class="hljs"><code><div>constructor(string memory _name, string memory _address, string memory _president, string memory _admin, uint256 _creationDate) Ownable() {
    communityName = _name;
    communityAddress = _address;
    presidentName = _president;
    adminName = _admin;
    creationDate = _creationDate;
}
</div></code></pre>
<h4 id="funciones-del-contrato-pantallas-y-pasos">Funciones del Contrato, pantallas y pasos</h4>
<p><strong>registerMember</strong>: Asigna tokens a un nuevo miembro. Solo puede ser llamada por el propietario.
<strong>createProposal</strong>: Crea una nueva propuesta. Solo puede ser iniciada por el propietario.
<strong>voteOnProposal</strong>: Permite a los miembros votar en propuestas activas.
<strong>executeProposal</strong>: Ejecuta una propuesta aprobada. Solo el propietario puede ejecutarla.</p>
<h2 id="frontend">Frontend</h2>
<p>El frontend está desarrollado en React y utiliza Web3.js para interactuar con el contrato inteligente a través de MetaMask.</p>
<ul>
<li>
<p><strong>Pagina Inicio</strong></p>
</li>
<li>
<p><img src="https://github.com/richpob/mi-dao-dapp/assets/133718913/36187c01-f0f5-4cd4-abdc-6c478c77c724" alt="image"></p>
</li>
<li>
<p><strong>Menú</strong></p>
</li>
<li>
<p><img src="https://github.com/richpob/mi-dao-dapp/assets/133718913/b6b84600-e07b-4540-b4d4-bc08f8edbfc3" alt="image"></p>
</li>
<li>
<p><strong>Incorporación de un miembro para votar</strong></p>
</li>
<li>
<p><img src="https://github.com/richpob/mi-dao-dapp/assets/133718913/1d345abc-16a2-4cda-8d98-ace2eb5e382e" alt="image"></p>
</li>
<li>
<p><img src="https://github.com/richpob/mi-dao-dapp/assets/133718913/9a94f3dd-603a-4062-a0e5-f258d5b11b04" alt="image"></p>
</li>
<li>
<p><strong>Creación de votación</strong></p>
</li>
<li>
<p><img src="https://github.com/richpob/mi-dao-dapp/assets/133718913/dd5122c5-76e5-4c19-80f4-2410e313e99d" alt="image"></p>
</li>
<li>
<p><img src="https://github.com/richpob/mi-dao-dapp/assets/133718913/391cb058-dcee-4004-99d7-cf4b572dbf0d" alt="image"></p>
</li>
<li>
<p><strong>Habilitación Manual de Proposal</strong></p>
</li>
<li>
<p><img src="https://github.com/richpob/mi-dao-dapp/assets/133718913/1899d3c1-6512-4c02-a15d-5b6f54fddf2b" alt="image"></p>
</li>
<li>
<p><strong>Votación</strong></p>
</li>
<li>
<p><img src="https://github.com/richpob/mi-dao-dapp/assets/133718913/f71cc639-9c6d-4e23-bc5e-710b22e3a802" alt="image"></p>
</li>
<li>
<p><img src="https://github.com/richpob/mi-dao-dapp/assets/133718913/c5fd850b-afbe-4f25-b174-11cfe3e30812" alt="image"></p>
</li>
</ul>
<h3 id="componentes-principales">Componentes Principales</h3>
<p>Formulario de Registro de Miembro: Permite a los usuarios registrarse como miembros.
Creador de Propuestas: Interfaz para que los administradores creen nuevas propuestas.
Votaciones: Permite a los miembros votar en propuestas activas.</p>
<h3 id="fuentes-de-los-componentes">Fuentes de los Componentes</h3>
<pre class="hljs"><code><div><span class="hljs-keyword">import</span> React, { useState, useEffect, useCallback } <span class="hljs-keyword">from</span> <span class="hljs-string">'react'</span>;
<span class="hljs-keyword">import</span> Web3 <span class="hljs-keyword">from</span> <span class="hljs-string">'web3'</span>;
<span class="hljs-keyword">import</span> { ErrorBoundary } <span class="hljs-keyword">from</span> <span class="hljs-string">'react-error-boundary'</span>;
<span class="hljs-keyword">import</span> { TextField, Button, CircularProgress, Typography, Container, Box, Menu, MenuItem, IconButton } <span class="hljs-keyword">from</span> <span class="hljs-string">'@mui/material'</span>;
<span class="hljs-keyword">import</span> { abi, contractAddress } <span class="hljs-keyword">from</span> <span class="hljs-string">'./App'</span>;
<span class="hljs-keyword">import</span> MoreVertIcon <span class="hljs-keyword">from</span> <span class="hljs-string">'@mui/icons-material/MoreVert'</span>

<span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">App</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">const</span> [web3, setWeb3] = useState(<span class="hljs-literal">null</span>);
  <span class="hljs-keyword">const</span> [contract, setContract] = useState(<span class="hljs-literal">null</span>);
  <span class="hljs-keyword">const</span> [accounts, setAccounts] = useState([]);
  <span class="hljs-keyword">const</span> [adminName, setAdminName] = useState(<span class="hljs-string">''</span>);
  <span class="hljs-keyword">const</span> [communityAddress, setCommunityAddress] = useState(<span class="hljs-string">''</span>);
  <span class="hljs-keyword">const</span> [communityName, setCommunityName] = useState(<span class="hljs-string">''</span>);
  <span class="hljs-keyword">const</span> [member, setMember] = useState(<span class="hljs-string">''</span>);
  <span class="hljs-keyword">const</span> [tokens, setTokens] = useState(<span class="hljs-string">''</span>);
  <span class="hljs-keyword">const</span> [loading, setLoading] = useState(<span class="hljs-literal">false</span>);
  <span class="hljs-keyword">const</span> [currentAccount, setCurrentAccount] = useState(<span class="hljs-string">''</span>);
  <span class="hljs-keyword">const</span> [currentNetwork, setCurrentNetwork] = useState(<span class="hljs-string">''</span>);
  <span class="hljs-keyword">const</span> [members, setMembers] = useState([]);
  <span class="hljs-keyword">const</span> [anchorEl, setAnchorEl] = useState(<span class="hljs-literal">null</span>);
  <span class="hljs-keyword">const</span> [selectedOption, setSelectedOption] = useState(<span class="hljs-literal">null</span>);
  <span class="hljs-keyword">const</span> [showMembersList, setShowMembersList] = useState(<span class="hljs-literal">false</span>);
  <span class="hljs-keyword">const</span> [proposalDetails, setProposalDetails] = useState(<span class="hljs-string">''</span>);
  <span class="hljs-keyword">const</span> [proposalId, setProposalId] = useState(<span class="hljs-string">''</span>); <span class="hljs-comment">// State for proposalId</span>
  <span class="hljs-keyword">const</span> [votes, setVotes] = useState(<span class="hljs-string">''</span>); <span class="hljs-comment">// State for votes</span>

  <span class="hljs-keyword">const</span> handleMenuOpen = <span class="hljs-function">(<span class="hljs-params">event</span>) =&gt;</span> {
    setAnchorEl(event.currentTarget);
  };

  <span class="hljs-keyword">const</span> handleMenuClose = <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    setAnchorEl(<span class="hljs-literal">null</span>);
  };

  <span class="hljs-keyword">const</span> handleMenuItemClick = <span class="hljs-function">(<span class="hljs-params">option</span>) =&gt;</span> {
    setSelectedOption(option);
    handleMenuClose();
    <span class="hljs-keyword">if</span> (option === <span class="hljs-string">"Listar miembros de la comunidad"</span>) {
      setShowMembersList(<span class="hljs-literal">true</span>);
    } <span class="hljs-keyword">else</span> {
      setShowMembersList(<span class="hljs-literal">false</span>);
    }
  };

  <span class="hljs-keyword">const</span> fetchMembers = useCallback(<span class="hljs-keyword">async</span> () =&gt; {
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">const</span> totalMembers = <span class="hljs-keyword">await</span> contract.methods.totalMembers().call();
      <span class="hljs-keyword">const</span> membersData = [];

      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; totalMembers; i++) {
        <span class="hljs-keyword">const</span> memberInfo = <span class="hljs-keyword">await</span> contract.methods.members(i).call();
        membersData.push(memberInfo);
      }

      setMembers(membersData);
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-built_in">console</span>.error(<span class="hljs-string">'Error al obtener los miembros:'</span>, error);
    }
  }, [contract]);

  useEffect(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">loadWeb3</span>(<span class="hljs-params"></span>) </span>{
      <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.ethereum) {
        <span class="hljs-keyword">const</span> web3 = <span class="hljs-keyword">new</span> Web3(<span class="hljs-built_in">window</span>.ethereum);
        <span class="hljs-keyword">await</span> <span class="hljs-built_in">window</span>.ethereum.enable();
        <span class="hljs-keyword">const</span> accounts = <span class="hljs-keyword">await</span> web3.eth.getAccounts();
        <span class="hljs-keyword">const</span> contract = <span class="hljs-keyword">new</span> web3.eth.Contract(abi, contractAddress);
        setWeb3(web3);
        setAccounts(accounts);
        setContract(contract);

        <span class="hljs-keyword">const</span> adminName = <span class="hljs-keyword">await</span> contract.methods.adminName().call();
        <span class="hljs-keyword">const</span> communityAddr = <span class="hljs-keyword">await</span> contract.methods.communityAddress().call();
        <span class="hljs-keyword">const</span> communityNm = <span class="hljs-keyword">await</span> contract.methods.communityName().call();

        setAdminName(adminName);
        setCommunityAddress(communityAddr);
        setCommunityName(communityNm);
      } <span class="hljs-keyword">else</span> {
        alert(<span class="hljs-string">'Por favor, instale MetaMask!'</span>);
      }
    }

    loadWeb3();
  }, []);

  useEffect(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    <span class="hljs-keyword">const</span> onAccountChange = <span class="hljs-function"><span class="hljs-params">newAccount</span> =&gt;</span> {
      setCurrentAccount(newAccount);
    };

    <span class="hljs-keyword">const</span> onNetworkChange = <span class="hljs-function"><span class="hljs-params">newNetwork</span> =&gt;</span> {
      setCurrentNetwork(newNetwork);
      <span class="hljs-keyword">if</span> (newNetwork !== <span class="hljs-string">'0x539'</span>) {
        alert(<span class="hljs-string">'¡No estás conectado a la red 0x539!'</span>);
      }
    };

    <span class="hljs-keyword">if</span> (web3) {
      <span class="hljs-built_in">window</span>.ethereum.on(<span class="hljs-string">'accountsChanged'</span>, onAccountChange);
      <span class="hljs-built_in">window</span>.ethereum.on(<span class="hljs-string">'chainChanged'</span>, onNetworkChange);

      <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
        <span class="hljs-built_in">window</span>.ethereum.removeListener(<span class="hljs-string">'accountsChanged'</span>, onAccountChange);
        <span class="hljs-built_in">window</span>.ethereum.removeListener(<span class="hljs-string">'chainChanged'</span>, onNetworkChange);
      };
    }
  }, [web3]);

  useEffect(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
    <span class="hljs-keyword">if</span> (contract) {
      fetchMembers();
    }
  }, [contract, fetchMembers]);

  <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">handleFetchMembers</span>(<span class="hljs-params"></span>) </span>{
    setLoading(<span class="hljs-literal">true</span>);
    <span class="hljs-keyword">await</span> fetchMembers();
    setLoading(<span class="hljs-literal">false</span>);
  }

  <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">registerMember</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">if</span> (!contract || !member || !tokens) {
      alert(<span class="hljs-string">'Todos los campos son obligatorios'</span>);
      <span class="hljs-keyword">return</span>;
    }
    setLoading(<span class="hljs-literal">true</span>);
    <span class="hljs-keyword">try</span> {
      <span class="hljs-keyword">await</span> contract.methods.registerMember(member, tokens).send({ <span class="hljs-attr">from</span>: accounts[<span class="hljs-number">0</span>] });
      alert(<span class="hljs-string">'Miembro registrado exitosamente'</span>);
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-built_in">console</span>.error(<span class="hljs-string">'Error al registrar el miembro:'</span>, error);
      alert(<span class="hljs-string">'Error al registrar el miembro'</span>);
    } <span class="hljs-keyword">finally</span> {
      setLoading(<span class="hljs-literal">false</span>);
    }
  }

  <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createProposal</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">if</span> (!contract) {
      alert(<span class="hljs-string">'No se puede crear la consulta sin un contrato.'</span>);
      <span class="hljs-keyword">return</span>;
    }
    setLoading(<span class="hljs-literal">true</span>);
    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// Lógica para crear la consulta a votar</span>
      <span class="hljs-keyword">await</span> contract.methods.createProposal(proposalDetails).send({ <span class="hljs-attr">from</span>: accounts[<span class="hljs-number">0</span>] });
      alert(<span class="hljs-string">'Consulta a votar creada exitosamente'</span>);
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-built_in">console</span>.error(<span class="hljs-string">'Error al crear la consulta a votar:'</span>, error);
      alert(<span class="hljs-string">'Error al crear la consulta a votar'</span>);
    } <span class="hljs-keyword">finally</span> {
      setLoading(<span class="hljs-literal">false</span>);
    }
  }

  <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">voteOnProposal</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">if</span> (!contract || !proposalId || !votes) {
      alert(<span class="hljs-string">'Todos los campos son obligatorios para votar en la propuesta'</span>);
      <span class="hljs-keyword">return</span>;
    }
    setLoading(<span class="hljs-literal">true</span>);
    <span class="hljs-keyword">try</span> {
      <span class="hljs-comment">// Lógica para votar en la propuesta</span>
      <span class="hljs-keyword">await</span> contract.methods.voteOnProposal(proposalId, votes).send({ <span class="hljs-attr">from</span>: accounts[<span class="hljs-number">0</span>] });
      alert(<span class="hljs-string">'Voto registrado exitosamente'</span>);
    } <span class="hljs-keyword">catch</span> (error) {
      <span class="hljs-built_in">console</span>.error(<span class="hljs-string">'Error al votar en la propuesta:'</span>, error);
      alert(<span class="hljs-string">'Error al votar en la propuesta'</span>);
    } <span class="hljs-keyword">finally</span> {
      setLoading(<span class="hljs-literal">false</span>);
    }
  }

  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">ErrorBoundary</span> <span class="hljs-attr">onError</span>=<span class="hljs-string">{(error,</span> <span class="hljs-attr">componentStack</span>) =&gt;</span> {
      console.error('Error RPC:', error);
      alert('Se produjo un error al realizar una llamada RPC. Por favor, inténtelo de nuevo más tarde.');
    }}&gt;
      <span class="hljs-tag">&lt;<span class="hljs-name">Container</span> <span class="hljs-attr">maxWidth</span>=<span class="hljs-string">"sm"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">IconButton</span>
          <span class="hljs-attr">aria-controls</span>=<span class="hljs-string">"menu"</span>
          <span class="hljs-attr">aria-haspopup</span>=<span class="hljs-string">"true"</span>
          <span class="hljs-attr">onClick</span>=<span class="hljs-string">{handleMenuOpen}</span>
          <span class="hljs-attr">size</span>=<span class="hljs-string">"large"</span>
          <span class="hljs-attr">color</span>=<span class="hljs-string">"primary"</span>
        &gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">MoreVertIcon</span> /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">IconButton</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Menu</span>
          <span class="hljs-attr">id</span>=<span class="hljs-string">"menu"</span>
          <span class="hljs-attr">anchorEl</span>=<span class="hljs-string">{anchorEl}</span>
          <span class="hljs-attr">open</span>=<span class="hljs-string">{Boolean(anchorEl)}</span>
          <span class="hljs-attr">onClose</span>=<span class="hljs-string">{handleMenuClose}</span>
        &gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">MenuItem</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> handleMenuItemClick("Crear Consulta a Votar")}&gt;Opción 1: Crear Consulta a Votar<span class="hljs-tag">&lt;/<span class="hljs-name">MenuItem</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">MenuItem</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> handleMenuItemClick("Realizar Votación")}&gt;Opción 2: Realizar Votación<span class="hljs-tag">&lt;/<span class="hljs-name">MenuItem</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">MenuItem</span> <span class="hljs-attr">onClick</span>=<span class="hljs-string">{()</span> =&gt;</span> handleMenuItemClick("Ingreso de miembros de la comunidad")}&gt;Opcion 4: Ingreso de miembros de la comunidad<span class="hljs-tag">&lt;/<span class="hljs-name">MenuItem</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">Menu</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Typography</span> <span class="hljs-attr">variant</span>=<span class="hljs-string">"h4"</span> <span class="hljs-attr">component</span>=<span class="hljs-string">"h1"</span> <span class="hljs-attr">gutterBottom</span>&gt;</span>
          Sistema de Votación de Comunidades
        <span class="hljs-tag">&lt;/<span class="hljs-name">Typography</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Box</span> <span class="hljs-attr">sx</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">mb:</span> <span class="hljs-attr">2</span>, <span class="hljs-attr">border:</span> '<span class="hljs-attr">1px</span> <span class="hljs-attr">solid</span> <span class="hljs-attr">black</span>', <span class="hljs-attr">padding:</span> '<span class="hljs-attr">10px</span>', <span class="hljs-attr">marginTop:</span> '<span class="hljs-attr">20px</span>' }}&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">Typography</span> <span class="hljs-attr">variant</span>=<span class="hljs-string">"h6"</span> <span class="hljs-attr">gutterBottom</span>&gt;</span>Información de la Red Ethereum y Cuentas<span class="hljs-tag">&lt;/<span class="hljs-name">Typography</span>&gt;</span>
          {Object.entries(currentAccount).map(([key, value]) =&gt; (
            <span class="hljs-tag">&lt;<span class="hljs-name">Typography</span> <span class="hljs-attr">key</span>=<span class="hljs-string">{key}</span>&gt;</span>{`${key}: ${value}`}<span class="hljs-tag">&lt;/<span class="hljs-name">Typography</span>&gt;</span>
          ))}
          <span class="hljs-tag">&lt;<span class="hljs-name">Typography</span>&gt;</span>Red Actual: {currentNetwork}<span class="hljs-tag">&lt;/<span class="hljs-name">Typography</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">Box</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">Box</span> <span class="hljs-attr">sx</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">mb:</span> <span class="hljs-attr">2</span>, <span class="hljs-attr">border:</span> '<span class="hljs-attr">1px</span> <span class="hljs-attr">solid</span> <span class="hljs-attr">black</span>', <span class="hljs-attr">padding:</span> '<span class="hljs-attr">10px</span>' }}&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">Typography</span> <span class="hljs-attr">variant</span>=<span class="hljs-string">"h6"</span>&gt;</span>Información del Contrato<span class="hljs-tag">&lt;/<span class="hljs-name">Typography</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">Typography</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>Administrador:<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span> {adminName}<span class="hljs-tag">&lt;/<span class="hljs-name">Typography</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">Typography</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>Dirección:<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span> {communityAddress}<span class="hljs-tag">&lt;/<span class="hljs-name">Typography</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">Typography</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">strong</span>&gt;</span>Nombre de la Comunidad:<span class="hljs-tag">&lt;/<span class="hljs-name">strong</span>&gt;</span> {communityName}<span class="hljs-tag">&lt;/<span class="hljs-name">Typography</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">Box</span>&gt;</span>
        {showMembersList &amp;&amp; (
          <span class="hljs-tag">&lt;<span class="hljs-name">Box</span> <span class="hljs-attr">sx</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">border:</span> '<span class="hljs-attr">1px</span> <span class="hljs-attr">solid</span> <span class="hljs-attr">black</span>', <span class="hljs-attr">padding:</span> '<span class="hljs-attr">10px</span>', <span class="hljs-attr">marginTop:</span> '<span class="hljs-attr">20px</span>' }}&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">Typography</span> <span class="hljs-attr">variant</span>=<span class="hljs-string">"h6"</span> <span class="hljs-attr">gutterBottom</span>&gt;</span>Miembros Registrados<span class="hljs-tag">&lt;/<span class="hljs-name">Typography</span>&gt;</span>
            {/* Lista de miembros */}
          <span class="hljs-tag">&lt;/<span class="hljs-name">Box</span>&gt;</span>
        )}
        {selectedOption === "Ingreso de miembros de la comunidad" &amp;&amp; (
          <span class="hljs-tag">&lt;<span class="hljs-name">Box</span> <span class="hljs-attr">sx</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">border:</span> '<span class="hljs-attr">1px</span> <span class="hljs-attr">solid</span> <span class="hljs-attr">black</span>', <span class="hljs-attr">padding:</span> '<span class="hljs-attr">10px</span>', <span class="hljs-attr">marginTop:</span> '<span class="hljs-attr">20px</span>' }}&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">Typography</span> <span class="hljs-attr">variant</span>=<span class="hljs-string">"h6"</span> <span class="hljs-attr">gutterBottom</span>&gt;</span>Registro de Miembros<span class="hljs-tag">&lt;/<span class="hljs-name">Typography</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">TextField</span>
              <span class="hljs-attr">fullWidth</span>
              <span class="hljs-attr">label</span>=<span class="hljs-string">"Dirección del Miembro"</span>
              <span class="hljs-attr">value</span>=<span class="hljs-string">{member}</span>
              <span class="hljs-attr">onChange</span>=<span class="hljs-string">{e</span> =&gt;</span> setMember(e.target.value)}
              margin="normal" /&gt;
            <span class="hljs-tag">&lt;<span class="hljs-name">TextField</span>
              <span class="hljs-attr">fullWidth</span>
              <span class="hljs-attr">label</span>=<span class="hljs-string">"Tokens"</span>
              <span class="hljs-attr">type</span>=<span class="hljs-string">"number"</span>
              <span class="hljs-attr">value</span>=<span class="hljs-string">{tokens}</span>
              <span class="hljs-attr">onChange</span>=<span class="hljs-string">{e</span> =&gt;</span> setTokens(e.target.value)}
              margin="normal" /&gt;
            <span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
              <span class="hljs-attr">variant</span>=<span class="hljs-string">"contained"</span>
              <span class="hljs-attr">color</span>=<span class="hljs-string">"primary"</span>
              <span class="hljs-attr">onClick</span>=<span class="hljs-string">{registerMember}</span>
              <span class="hljs-attr">disabled</span>=<span class="hljs-string">{loading}</span>
              <span class="hljs-attr">fullWidth</span>
            &gt;</span>
              {loading ? <span class="hljs-tag">&lt;<span class="hljs-name">CircularProgress</span> <span class="hljs-attr">size</span>=<span class="hljs-string">{24}</span> /&gt;</span> : 'Guardar Propietario'}
            <span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">Box</span>&gt;</span>
        )}
        {selectedOption === "Crear Consulta a Votar" &amp;&amp; (
          <span class="hljs-tag">&lt;<span class="hljs-name">Box</span> <span class="hljs-attr">sx</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">border:</span> '<span class="hljs-attr">1px</span> <span class="hljs-attr">solid</span> <span class="hljs-attr">black</span>', <span class="hljs-attr">padding:</span> '<span class="hljs-attr">10px</span>', <span class="hljs-attr">marginTop:</span> '<span class="hljs-attr">20px</span>' }}&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">Typography</span> <span class="hljs-attr">variant</span>=<span class="hljs-string">"h6"</span> <span class="hljs-attr">gutterBottom</span>&gt;</span>Crear Consulta a Votar<span class="hljs-tag">&lt;/<span class="hljs-name">Typography</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">TextField</span>
              <span class="hljs-attr">fullWidth</span>
              <span class="hljs-attr">label</span>=<span class="hljs-string">"Detalles de la Propuesta"</span>
              <span class="hljs-attr">value</span>=<span class="hljs-string">{proposalDetails}</span>
              <span class="hljs-attr">onChange</span>=<span class="hljs-string">{e</span> =&gt;</span> setProposalDetails(e.target.value)}
              margin="normal" /&gt;
            <span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
              <span class="hljs-attr">variant</span>=<span class="hljs-string">"contained"</span>
              <span class="hljs-attr">color</span>=<span class="hljs-string">"primary"</span>
              <span class="hljs-attr">onClick</span>=<span class="hljs-string">{createProposal}</span>
              <span class="hljs-attr">disabled</span>=<span class="hljs-string">{loading}</span>
              <span class="hljs-attr">fullWidth</span>
            &gt;</span>
              {loading ? <span class="hljs-tag">&lt;<span class="hljs-name">CircularProgress</span> <span class="hljs-attr">size</span>=<span class="hljs-string">{24}</span> /&gt;</span> : 'Crear Consulta'}
            <span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">Box</span>&gt;</span>
        )}
        {selectedOption === "Realizar Votación" &amp;&amp; (
          <span class="hljs-tag">&lt;<span class="hljs-name">Box</span> <span class="hljs-attr">sx</span>=<span class="hljs-string">{{</span> <span class="hljs-attr">border:</span> '<span class="hljs-attr">1px</span> <span class="hljs-attr">solid</span> <span class="hljs-attr">black</span>', <span class="hljs-attr">padding:</span> '<span class="hljs-attr">10px</span>', <span class="hljs-attr">marginTop:</span> '<span class="hljs-attr">20px</span>' }}&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">Typography</span> <span class="hljs-attr">variant</span>=<span class="hljs-string">"h6"</span> <span class="hljs-attr">gutterBottom</span>&gt;</span>Realizar Votación<span class="hljs-tag">&lt;/<span class="hljs-name">Typography</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">TextField</span>
              <span class="hljs-attr">fullWidth</span>
              <span class="hljs-attr">label</span>=<span class="hljs-string">"ID de la Propuesta"</span>
              <span class="hljs-attr">type</span>=<span class="hljs-string">"number"</span>
              <span class="hljs-attr">value</span>=<span class="hljs-string">{proposalId}</span>
              <span class="hljs-attr">onChange</span>=<span class="hljs-string">{e</span> =&gt;</span> setProposalId(e.target.value)}
              margin="normal" /&gt;
            <span class="hljs-tag">&lt;<span class="hljs-name">TextField</span>
              <span class="hljs-attr">fullWidth</span>
              <span class="hljs-attr">label</span>=<span class="hljs-string">"Votos"</span>
              <span class="hljs-attr">type</span>=<span class="hljs-string">"number"</span>
              <span class="hljs-attr">value</span>=<span class="hljs-string">{votes}</span>
              <span class="hljs-attr">onChange</span>=<span class="hljs-string">{e</span> =&gt;</span> setVotes(e.target.value)}
              margin="normal" /&gt;
            <span class="hljs-tag">&lt;<span class="hljs-name">Button</span>
              <span class="hljs-attr">variant</span>=<span class="hljs-string">"contained"</span>
              <span class="hljs-attr">color</span>=<span class="hljs-string">"primary"</span>
              <span class="hljs-attr">onClick</span>=<span class="hljs-string">{voteOnProposal}</span>
              <span class="hljs-attr">disabled</span>=<span class="hljs-string">{loading}</span>
              <span class="hljs-attr">fullWidth</span>
            &gt;</span>
              {loading ? <span class="hljs-tag">&lt;<span class="hljs-name">CircularProgress</span> <span class="hljs-attr">size</span>=<span class="hljs-string">{24}</span> /&gt;</span> : 'Votar en la Propuesta'}
            <span class="hljs-tag">&lt;/<span class="hljs-name">Button</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">Box</span>&gt;</span>
        )}
     <span class="hljs-tag">&lt;/<span class="hljs-name">Container</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">ErrorBoundary</span>&gt;</span></span>
  );
}

</div></code></pre>
<h2 id="interacci%C3%B3n-con-el-contrato-de-la-comunidad">Interacción con el Contrato de la Comunidad</h2>
<p>Este proyecto React permite interactuar con un contrato inteligente de Ethereum para gestionar una comunidad. Los usuarios pueden registrar miembros y consultar información del contrato directamente desde la interfaz.</p>
<h3 id="funcionalidades">Funcionalidades</h3>
<ul>
<li><strong>Conexión con MetaMask</strong>: Conexión automática a MetaMask para interactuar con la blockchain.</li>
<li><strong>Registro de miembros</strong>: Permite a los administradores registrar nuevos miembros y asignarles tokens.</li>
<li><strong>Visualización de información del contrato</strong>: Muestra datos como el nombre del administrador, la dirección y el nombre de la comunidad.</li>
</ul>
<h3 id="tecnolog%C3%ADas-utilizadas">Tecnologías Utilizadas</h3>
<ul>
<li>React.js</li>
<li>Web3.js</li>
<li>Material-UI: para los componentes de la interfaz de usuario.</li>
<li>Ethereum Blockchain</li>
</ul>
<h3 id="instalaci%C3%B3n-y-configuraci%C3%B3n">Instalación y Configuración</h3>
<p>Asegúrate de tener instalado <code>Node.js</code> y <code>npm</code>. Sigue los pasos para ejecutar la aplicación:</p>
<ol>
<li>Clona el repositorio.</li>
<li>Instala las dependencias necesarias:</li>
</ol>
<h2 id="detalles-del-c%C3%B3digo">Detalles del Código</h2>
<h3 id="componente-app">Componente <code>App</code></h3>
<p>Es el componente principal que maneja la conexión con Ethereum y muestra la interfaz de usuario.</p>
<h4 id="variables-de-estado">Variables de Estado</h4>
<ul>
<li><code>web3</code>: Instancia de Web3 usada en toda la aplicación.</li>
<li><code>contract</code>: Instancia del contrato inteligente.</li>
<li><code>accounts</code>: Lista de cuentas disponibles desde el wallet.</li>
<li><code>adminName</code>, <code>communityAddress</code>, <code>communityName</code>: Variables para almacenar y mostrar la información del contrato.</li>
<li><code>member</code>: Dirección del nuevo miembro a registrar.</li>
<li><code>tokens</code>: Número de tokens a asignar al nuevo miembro.</li>
<li><code>loading</code>: Estado para controlar la visualización del indicador de carga durante las transacciones.</li>
</ul>
<h4 id="hook-useeffect-de-ejemplo">Hook <code>useEffect</code> de ejemplo</h4>
<p>Inicializa la conexión con MetaMask y carga los datos iniciales desde el contrato:</p>
<pre class="hljs"><code><div>useEffect(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">loadWeb3</span>(<span class="hljs-params"></span>) </span>{
 <span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.ethereum) {
   <span class="hljs-keyword">const</span> web3 = <span class="hljs-keyword">new</span> Web3(<span class="hljs-built_in">window</span>.ethereum);
   <span class="hljs-keyword">await</span> <span class="hljs-built_in">window</span>.ethereum.enable();
   <span class="hljs-keyword">const</span> accounts = <span class="hljs-keyword">await</span> web3.eth.getAccounts();
   <span class="hljs-keyword">const</span> contract = <span class="hljs-keyword">new</span> web3.eth.Contract(abi, contractAddress);
   setWeb3(web3);
   setAccounts(accounts);
   setContract(contract);

   <span class="hljs-keyword">const</span> adminName = <span class="hljs-keyword">await</span> contract.methods.adminName().call();
   <span class="hljs-keyword">const</span> communityAddr = <span class="hljs-keyword">await</span> contract.methods.communityAddress().call();
   <span class="hljs-keyword">const</span> communityNm = <span class="hljs-keyword">await</span> contract.methods.communityName().call();

   setAdminName(adminName);
   setCommunityAddress(communityAddr);
   setCommunityName(communityNm);
 } <span class="hljs-keyword">else</span> {
   alert(<span class="hljs-string">'¡Instala MetaMask!'</span>);
 }
}

loadWeb3();
}, []);
</div></code></pre>
<h4 id="funci%C3%B3n-registermember">Función registerMember</h4>
<p>Maneja el registro de un nuevo miembro enviando una transacción al contrato inteligente:</p>
<pre class="hljs"><code><div><span class="hljs-keyword">const</span> registerMember = <span class="hljs-keyword">async</span> () =&gt; {
  <span class="hljs-keyword">if</span> (!contract || !member || !tokens) {
    alert(<span class="hljs-string">'Todos los campos son obligatorios'</span>);
    <span class="hljs-keyword">return</span>;
  }
  setLoading(<span class="hljs-literal">true</span>);
  <span class="hljs-keyword">try</span> {
    <span class="hljs-keyword">await</span> contract.methods.registerMember(member, tokens).send({ <span class="hljs-attr">from</span>: accounts[<span class="hljs-number">0</span>] });
    alert(<span class="hljs-string">'Miembro registrado con éxito'</span>);
  } <span class="hljs-keyword">catch</span> (error) {
    <span class="hljs-built_in">console</span>.error(<span class="hljs-string">'Error al registrar miembro:'</span>, error);
    alert(<span class="hljs-string">'Falló el registro del miembro'</span>);
  } <span class="hljs-keyword">finally</span> {
    setLoading(<span class="hljs-literal">false</span>);
  }
};

</div></code></pre>
<h3 id="mejoras-futuras">Mejoras Futuras</h3>
<p><strong>Manejo avanzado de errores</strong>: Proporcionar retroalimentación más detallada sobre los errores de blockchain. OK
<strong>Actualizaciones en tiempo real</strong>: Implementar WebSocket u otra tecnología para obtener actualizaciones en tiempo real del estado del contrato.
<strong>Accesibilidad mejorada:</strong> Asegurar que la interfaz cumpla con los estándares de accesibilidad.
<strong>Completar otras funciones del contrato:</strong> Pendientes funcionalidades del Smart Contrat y mejoras en la usabilidad de cara al usuario.</p>
<h2 id="licencia">Licencia</h2>
<p>Este proyecto está bajo la Licencia MIT.</p>

</body>
</html>
